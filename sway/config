# Basic Variables
set $mod Mod4
set $terminal i3-sensible-terminal
font pango:monospace 10

# Brightness (intel_backlight)
bindsym XF86MonBrightnessUp exec brightnessctl set +10%
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

# Input Configuration
input type:keyboard {
    xkb_layout jp
}

# Output Configuration
output DP-1 scale 2 position 0 0
output eDP-1 scale 1.5 position 0 1080

# Autostart
exec_always --no-startup-id waybar -c ~/.config/waybar/sway/config.jsonc -s ~/.config/waybar/style.css
exec_always --no-startup-id swaybg -i "$HOME/.config/sway/background.png" -m fill
exec_always --no-startup-id fcitx5 -d
exec_always --no-startup-id mako

# Appearance
gaps inner 4
gaps outer 4
default_border pixel 2

client.focused          #88c0d0 #88c0d0 #2e3440 #88c0d0 #88c0d0
client.unfocused        #3b4252 #3b4252 #d8dee9 #3b4252 #3b4252
client.focused_inactive #3b4252 #3b4252 #d8dee9 #3b4252 #3b4252
client.urgent           #bf616a #bf616a #ffffff #bf616a #bf616a

# Workspace Definition
set $ws1 "1:Terminal"
set $ws2 "2:Web"
set $ws3 "3:Code"
set $ws4 "4:Web"
set $ws5 "5:Chat"
set $ws0 "0:Extra"

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+0 workspace $ws0

bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+0 move container to workspace $ws0

# Applications
bindsym $mod+Return exec kitty

# Window Management
bindsym $mod+q kill                         # 关闭当前窗口
bindsym $mod+f floating toggle

# Alt+Tab：当前工作区窗口切换
bindsym Mod1+Tab focus next
bindsym Mod1+Shift+Tab focus prev

# Win+Tab：工作区切换
bindsym Mod4+Tab workspace next
bindsym Mod4+Shift+Tab workspace prev

# 调整大小
bindsym $mod+Shift+l resize grow width 100 px
bindsym $mod+Shift+h resize shrink width 100 px

#bindsym $mod+Shift+k resize shrink height 100 px
#bindsym $mod+Shift+l resize grow height 100 px

# 应用启动
bindsym $mod+d exec wofi --show drun
bindsym $mod+Ctrl+Alt+Shift+q exec swaynag \
  -t warning \
  -m "Are you sure you want to exit Sway?" \
  -b "Exit" "swaymsg exit" \
  -b "Cancel" ""

# Bindings - Screenshot
bindsym Print exec bash -c 'grim - | wl-copy && notify-send "Screenshot" "Full screen copied to clipboard" -t 2000'
bindsym Alt+Print exec bash -c 'filename=~/Downloads/screenshot-$(date +%Y%m%d-%H%M%S).png && grim "$filename" && notify-send "Screenshot" "Saved to Downloads" -t 3000'
bindsym Shift+Print exec bash -c 'filename=~/Downloads/screenshot-$(date +%Y%m%d-%H%M%S).png && grim -g "$(slurp)" "$filename" && notify-send "Area Screenshot" "Saved to Downloads" -t 3000'
bindsym Alt+a exec bash -c 'grim -g "$(slurp)" - | wl-copy && notify-send "Area Screenshot" "Copied to clipboard" -t 2000'

#############################################################
# Modes

# Move mode
bindsym $mod+m mode "move"
mode "move" {
    bindsym h move left
    bindsym l move right
    bindsym k move up
    bindsym j move down

    bindsym Left  move left
    bindsym Right move right
    bindsym Up    move up
    bindsym Down  move down

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Move output mode
bindsym $mod+Shift+m mode "move-output"
mode "move-output" {
    bindsym h move container to output left
    bindsym l move container to output right
    bindsym k move container to output up
    bindsym j move container to output down

    bindsym Left  container to output left
    bindsym Right container to output right
    bindsym Up    container to output up
    bindsym Down  container to output down

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Resize mode
bindsym $mod+r mode "resize"
mode "resize" {
    bindsym h resize shrink width 10 px
    bindsym l resize grow width 10 px
    bindsym k resize shrink height 10 px
    bindsym j resize grow height 10 px

    bindsym Shift+h resize shrink width 100 px
    bindsym Shift+l resize grow width 100 px
    bindsym Shift+k resize shrink height 100 px
    bindsym Shift+j resize grow height 100 px

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Panel mode
bindsym Mod4+p mode "Panel"
mode "Panel" {
    # 循环切换（可选，像 Alt+Tab）
    bindsym a focus next
    bindsym s focus prev

    # 关闭当前窗口
    bindsym x kill
    bindsym f fullscreen toggle
    bindsym Shift+f floating toggle

    # 退出 Panel 模式
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Tab mode
bindsym $mod+t layout tabbed, mode "tab"
mode "tab" {
    # 移动 / 切换 tab（zellij 风格）
    bindsym h focus left
    bindsym l focus right
    bindsym k focus up
    bindsym j focus down

    # 备用（直觉一点）
    bindsym Left  focus left
    bindsym Right focus right

    # 新 terminal 进入当前 tab 容器
    bindsym n exec $terminal

    # 关闭
    bindsym x kill

    # Break out（打散当前 tab）
    # 把当前窗口移出 tab 容器
    bindsym b move container to workspace current

    # 切换 tab / stacked / split
    bindsym Tab layout toggle tabbed stacked splith

    # 退出 tab 模式
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Workspace mode
bindsym Mod4+a mode "workspace"
mode "workspace" {
    # 切换 workspace（数字）
    bindsym 1 workspace number 1
    bindsym 2 workspace number 2
    bindsym 3 workspace number 3
    bindsym 4 workspace number 4
    bindsym 5 workspace number 5
    bindsym 0 workspace number 0

    # 移动窗口到 workspace（Shift）
    bindsym Shift+1 move container to workspace number 1
    bindsym Shift+2 move container to workspace number 2
    bindsym Shift+3 move container to workspace number 3
    bindsym Shift+4 move container to workspace number 4
    bindsym Shift+5 move container to workspace number 5
    bindsym Shift+0 move container to workspace number 0

    # 移动到0号workspace
    bindsym a move container to workspace number 0
    bindsym Shift+a workspace number 0

    bindsym n workspace prev
    bindsym m workspace next

    # 退出 workspace 模式
    bindsym Escape mode "default"
    bindsym Return mode "default"
}

